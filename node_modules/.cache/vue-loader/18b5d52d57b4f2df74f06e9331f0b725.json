{"remainingRequest":"E:\\Firefox-latest\\webstorm\\supermall-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Firefox-latest\\webstorm\\supermall-master\\src\\views\\home\\Home.vue?vue&type=style&index=0&id=3dd2e005&scoped=true&lang=css&","dependencies":[{"path":"E:\\Firefox-latest\\webstorm\\supermall-master\\src\\views\\home\\Home.vue","mtime":1615214131813},{"path":"E:\\Firefox-latest\\webstorm\\supermall-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Firefox-latest\\webstorm\\supermall-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\Firefox-latest\\webstorm\\supermall-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\Firefox-latest\\webstorm\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Firefox-latest\\webstorm\\supermall-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5ob21lLW5hdnsKICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci10aW50KTsKICBjb2xvcjogd2hpdGU7Cn0KLnRhYi1jb250cm9sIHsKICBwb3NpdGlvbjogc3RpY2t5OwogIHRvcDogNDRweDsKICB6LWluZGV4OiA5Owp9CgouY29udGVudCB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKCiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogNDRweDsKICBib3R0b206IDQ5cHg7CiAgbGVmdDogMDsKICByaWdodDogMDsKfQovKi5maXhlZHsqLwovKiAgcG9zaXRpb246IGZpeGVkOyovCi8qICBsZWZ0OiAwOyovCi8qICByaWdodDogMDsqLwovKiAgdG9wOiA0NHB4OyovCi8qfSovCg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<!--<template>-->\n<!--  <div id=\"home\">-->\n<!--    <nav-bar class=\"home-nav-bar\">-->\n<!--      <div slot=\"center\">购物街</div>-->\n<!--    </nav-bar>-->\n<!--&lt;!&ndash; ref 是用于定位元素和取到组件的内容，:是绑定属性 @是绑定方法&ndash;&gt;-->\n<!--    <scroller class=\"home-scroller\" ref=\"scroller\" :probe-type=\"3\" @scroll=\"getPostion\">-->\n<!--      <home-swiper :cbanners=\"banners\"/>-->\n<!--      <home-recommend :cproducts=\"products\"/>-->\n<!--      <home-feature-view/>-->\n<!--      <tab-control class=\"home-tab-control\" :ctitles=\"['流行', '新款', '精选']\" @tabClick=\"pTabClick\"/>-->\n<!--      <goods-list :cgoods=\"showGoods\"/>-->\n<!--    </scroller>-->\n\n<!--    <back-top @click.native=\"backTopClick\" v-show=\"isShowBackTop\" />-->\n<!--  </div>-->\n<!--</template>-->\n\n<!--<script>-->\n<!--    import NavBar from \"components/common/navbar/NavBar\";-->\n<!--    import HomeSwiper from \"./childComps/HomeSwiper\";-->\n<!--    import HomeRecommend from \"./childComps/HomeRecommend\";-->\n<!--    import HomeFeatureView from \"./childComps/HomeFeatureView\";-->\n<!--    import TabControl from \"components/contents/tabControl/TabControl\";-->\n<!--    import GoodsList from \"components/contents/good/GoodsList\";-->\n<!--    import Scroller from \"components/common/scroller/Scroller\";-->\n<!--    import BackTop from \"components/contents/backTop/BackTop\";-->\n\n<!--    import {getHomeMultiData, getGoodsData} from \"network/home\";-->\n\n<!--    export default {-->\n<!--        name: \"Home\",-->\n<!--        components:{-->\n<!--            NavBar,-->\n<!--            HomeSwiper,-->\n<!--            HomeRecommend,-->\n<!--            HomeFeatureView,-->\n<!--            TabControl,-->\n<!--            GoodsList,-->\n<!--            Scroller,-->\n<!--            BackTop-->\n<!--        },-->\n<!--        data() {-->\n<!--          return {-->\n<!--            banners: [],-->\n<!--            products: [],-->\n<!--            goods:{-->\n<!--              pop:{page:0, list:[]},-->\n<!--              new:{page:0, list:[]},-->\n<!--              sell:{page:0, list:[]}-->\n<!--            },-->\n<!--            currentType:'pop',-->\n<!--            isShowBackTop: false-->\n<!--          }-->\n<!--        },-->\n<!--        computed: {-->\n<!--            showGoods() {-->\n<!--                return this.goods[this.currentType].list-->\n<!--            }-->\n<!--        },-->\n<!--        created() {-->\n<!--            this.getHomeData()-->\n\n<!--            this.getHomeGoodsData('pop')-->\n<!--            this.getHomeGoodsData('new')-->\n<!--            this.getHomeGoodsData('sell')-->\n<!--        },-->\n<!--        methods:{-->\n<!--            pTabClick(index) {-->\n<!--                switch (index) {-->\n<!--                  case 0:-->\n<!--                      this.currentType = 'pop'-->\n<!--                      break-->\n<!--                  case 1:-->\n<!--                      this.currentType = 'new'-->\n<!--                      break-->\n<!--                  case 2:-->\n<!--                      this.currentType = 'sell'-->\n<!--                      break-->\n<!--              }-->\n<!--            },-->\n<!--            getHomeData() {-->\n<!--                getHomeMultiData().then(res => {-->\n<!--                    this.banners = res.data.banners-->\n<!--                    this.products = res.data.products-->\n<!--                })-->\n<!--            },-->\n<!--            getHomeGoodsData(type) {-->\n<!--                let page = this.goods[type].page + 1-->\n<!--                getGoodsData(type, page).then(res => {-->\n<!--                    this.goods[type].list.push(...res.goods)-->\n<!--                    this.goods[type].page = res.page-->\n<!--                })-->\n<!--            },-->\n<!--            backTopClick() {-->\n<!--                // 通过$refs拿到组件中的对象-->\n<!--                this.$refs.scroller.scrollTo(0, 0, 500)-->\n<!--            },-->\n<!--            getPostion(postion) {-->\n<!--                this.isShowBackTop = -postion.y > 300-->\n<!--            }-->\n<!--        }-->\n<!--    }-->\n<!--</script>-->\n\n<!--<style scoped>-->\n<!--  #home {-->\n<!--    padding-top: 44px;-->\n<!--    height: 100vh;-->\n<!--    position: relative;-->\n<!--  }-->\n\n<!--  .home-nav-bar {-->\n<!--    background-color: var(&#45;&#45;color-tint);-->\n<!--    color:#fff;-->\n\n<!--    position: fixed;-->\n<!--    left: 0;-->\n<!--    right:0;-->\n<!--    top: 0;-->\n<!--    z-index: 9;-->\n\n<!--  }-->\n\n<!--  .home-tab-control{-->\n<!--    /*两个要混合使用*/-->\n<!--    position: sticky;-->\n<!--    top: 43px;/*顶部navbar的高度*/-->\n<!--    z-index: 9;-->\n<!--  }-->\n\n<!--  .home-scroller{-->\n<!--    /*height:300px;*/-->\n<!--    overflow: hidden;-->\n<!--    position: absolute;-->\n<!--    top: 44px;-->\n<!--    bottom: 49px;-->\n<!--    right: 0;-->\n<!--    left: 0;-->\n<!--  }-->\n\n\n\n<!--</style>-->\n<template>\n  <div id=\"home\">\n    <nav-bar class=\"home-nav\"><div slot=\"center\">购物街</div></nav-bar>\n    <tab-control  :titles=\"['流行','新款','精选']\"\n                  @tabClick=\"tabClick\"\n                  ref=\"tabcontrol1\"\n                  class=\"tab-control\"v-show=\"isTabFixed\"\n    ></tab-control>\n\n    <scroller class=\"content\"\n              ref=\"scroll\"\n              :probe-type=\"3\"\n              @scroll=\"contentScroll\"\n              :pull-up-load=\"true\"\n              @pullingUp=\"loadMore\"\n    >\n      <home-swiper :banners=\"banners\" @swiperItemLoad=\"swiperItemLoad\"></home-swiper>\n      <home-recommend :recommends=\"recommends\"></home-recommend>\n      <home-feature-view></home-feature-view>\n      <tab-control  :titles=\"['流行','新款','精选']\"\n                    @tabClick=\"tabClick\"\n                    ref=\"tabcontrol2\"\n\n      ></tab-control>\n      <goods-list  :goods=\"showGoods\"></goods-list>\n      <back-top  @click.native=\"backClick\"></back-top>\n    </scroller>\n\n\n\n\n  </div>\n</template>\n\n<script>\n  import NavBar from \"../../components/common/navbar/NavBar\";\n  import HomeSwiper from \"./childComps/HomeSwiper\";\n  import HomeRecommend from \"./childComps/HomeRecommend\";\n  import HomeFeatureView from \"./childComps/HomeFeatureView\";\n  import TabControl from \"../../components/contents/tabControl/TabControl\";\n  import GoodsList from \"../../components/contents/good/GoodsList\";\n  import Scroller from \"../../components/common/scroller/Scroller\";\n  import BackTop from \"../../components/contents/backTop/BackTop\";\n\n\n\n  import {getHomeMultiData,getHomeGoods} from \"../../network/home\"\n\n  export default {\n    name: \"Home\",\n    components: {\n      NavBar,\n      HomeSwiper,\n      HomeRecommend,\n      HomeFeatureView,\n      TabControl,\n      GoodsList,\n      Scroller,\n      BackTop\n\n    },\n    data() {\n      return {\n        banners: [],\n        recommends: [],\n        goods: {\n          'pop': {page: 0, list: []},\n          'new': {page: 0, list: []},\n          'sell': {page: 0, list: []},\n\n        },\n        currentType: 'pop',\n        isShowBackTop:false,\n        tabOffsetTop:0,\n        isTabFixed:false,\n        saveY:0\n      }\n    },\n    computed:{\n      showGoods() {\n        return this.goods[this.currentType].list\n      },\n      isTabFixed() {\n        return this.offsetTop >= this.tabOffsetTop;\n      }\n    },\n    created() {\n      this.getHomeMultiData();\n\n\n      this.getHomeGoods('pop');\n      this.getHomeGoods('new');\n      this.getHomeGoods('sell');\n\n      this.$bus.$on('itemImageLoad',() =>{\n\n      })\n    },\n    mounted() {\n      const refresh =this.debounce(this.$refs.scroll.refresh,200)\n\n      this.$bus.$on('itemImageLoad',() =>{\n        refresh()\n\n      })\n      this.tabOffsetTop=this.$refs.tabcontrol2.$el.offsetTop\n\n    },\n    methods: {\n\n      debounce(func,delay){\n        let timer=null\n        return function (...args) {\n          if (timer) clearTimeout(timer)\n          timer=setTimeout(() =>{\n            func.apply(this,args)\n          },delay)\n        }\n      },\n      backClick(){\n      this.$refs.scroll.scrollTo(0,0)\n      },\n\n      getHomeMultiData() {\n        getHomeMultiData().then(res => {\n\n            this.banners = res.data.banner.list;\n            this.recommends = res.data.recommend.list;\n\n          }\n        )\n      },\n\n      getHomeGoods(type){\n        const page =this.goods[type].page+1;\n        getHomeGoods(type,page).then(res => {\n          this.goods[type].list.push(...res.data.list);\n          this.goods[type].page+=1;\n      })\n      },\n\n      tabClick(index){\n        switch (index) {\n            case 0: this.currentType='pop'\n                break;\n            case 1:this.currentType='new'\n                break;\n            case 2:this.currentType='sell'\n                break;\n        }\n        this.$refs.tabcontrol1.currentIndex=index;\n        this.$refs.tabcontrol2.currentIndex=index;\n\n      },\n\n      contentScroll(position){\n        this.isShowBackTop=(-position.y)>1000\n\n        this.isTabFixed=(-position.y)>this.tabOffsetTop\n      },\n\n      loadMore(){\n        this.getHomeGoods(this.currentType)\n      },\n      swiperItemLoad(){\n        console.log(this.$refs.tabControl.$el.offsetTop)\n      }\n\n    },\n    activated() {\n      this.$refs.scroll.refresh();\n      this.$refs.scroll.scrollTo(0,this.saveY,0)\n    },\n\n    deactivated() {\n      this.saveY=this.$refs.scroll.getScrollY()\n    }\n  }\n</script>\n\n<style scoped>\n  .home-nav{\n    background-color: var(--color-tint);\n    color: white;\n  }\n  .tab-control {\n    position: sticky;\n    top: 44px;\n    z-index: 9;\n  }\n\n  .content {\n    overflow: hidden;\n\n    position: absolute;\n    top: 44px;\n    bottom: 49px;\n    left: 0;\n    right: 0;\n  }\n  /*.fixed{*/\n  /*  position: fixed;*/\n  /*  left: 0;*/\n  /*  right: 0;*/\n  /*  top: 44px;*/\n  /*}*/\n</style>\n"]}]}